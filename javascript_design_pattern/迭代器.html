<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>迭代器</title>
<script>
	// 类似jq的迭代器
	function each(obj, callback) {
		var len = obj.length,
			isArray = typeof len == 'number';

		if (isArray) {
			for (var i = 0; i < len; i++) {
				if (callback.call(obj[i], obj[i], i) === false) {
					break;
				}
			}
		} else {
			for (var i in obj) {
				if (callback.call(obj[i], obj[i], i) === false) {
					break;
				}
			}
		}
	}
	// var obj={a:1,b:'dfd'};
	// each(obj,function(item,i){
	// 	console.log(item,i);
	// });

	// 迭代器模式获取上传组件对象
	var getActiveUploadObj = function () {
		try {
			return new ActiveXObject('xxxxx'); //ie上传控件
		} catch (e) {
			return false;
		}
	};

	var getFlashUploadObj = function () {
		if (supportFlash()) {
			return $('<object type="application/x-shockwave-flash"></object>').appendTo('body');
		} else {
			return false;
		}
	};

	var getFormUploadObj = function () {
		return $('<input name="file" type="file"/>').appendTo('body');
	};

	var iteratorUploadObj = function () {
		for (var i = 0, len = arugments.length; i < len; i++) {
			var uploadObj = arugments[i];
			if (uploadObj) {
				return uploadObj;
			}
		}
	};

	var uploadObj = iteratorUploadObj(getActiveUploadObj, getFlashUploadObj, getFormUploadObj);
</script>
</head>
<body></body>
</html>
